{
    "comment" : "Install a device per second, to test DP partition-growing and rules execution. Each has a <count> value which counts from 0 to 500 in the first 500 secs. So a rule of (count==400) should be false then true then false.",
    "restart_log" : true,
    "engine" : {
        "type" : "sim",
        "start_time" : "now",
        "end_time" : "PT100M"
    },
    "events" : [
        {   
            "repeats" : 5000,
			"interval" : "PT1S",
            "action" : {
				"create_device" : {
                	"functions" : {
                    	"variable" : [
                        	{
                            	"name" : "count",
								"timefunction" : {
                            		"count" : {
										"interval" : "PT1S",
										"increment" : 1,
										"stop_at" : 800,
										"comment" : "We stop at 800, because we want to keep data flowing into the partition for at least 5 minutes (300 secs == 300 counts) after our trigger value of (count==400)"
									}
								}
                        	}
						]
					}
				}
			}
        }
    ]
}

